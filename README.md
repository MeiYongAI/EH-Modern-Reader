# EH Modern Reader

版本: 1.0.0

一个更现代、顺手的 E-Hentai MPV 阅读器增强脚本，带底部缩略图、快捷导航、图片缓存与并发去重、悬停显示、以及原型版“连续横向”阅读模式。

## 主要特性

- 图片缓存与并发去重：重复点击或快速跳转时只加载一次，命中缓存秒显。
- 惰性跳转（去抖）：拖动进度条或快速切换时，仅跳到最终停留的页，避免中途页反复加载。
- 缩略图悬停显示（可开关）：开启后，鼠标靠近底部自动显示缩略图+进度条，移开自动隐藏；关闭时缩略图默认隐藏，底部仅保留进度条。
- 缩略图滚动优化：鼠标滚轮横向滚动更灵敏，快速定位目标页。
- UI 精简：移除底部重复页码、移除进度条彩色填充（仅保留滑块）。
- 主题切换图标自适配：暗色显示太阳，浅色显示月亮。
- 连续横向模式（原型）：类似 JHenTai 的横向连续浏览（基础可用，后续将增强懒加载与性能）。

## 使用方式

- 顶部工具栏：
  - 主题切换：暗色/浅色（图标随模式切换）。
  - 连续模式：切换单页/连续横向模式。
  - 缩略图开关：开启后启用“靠底部悬停显示”缩略图+进度条；关闭时仅显示进度条且默认不显示缩略图。
- 快捷键：
  - 翻页：← → 或 A / D，空格 = 下一页（快速连击时仅跳最终页）
  - 缩放：+ 放大、- 缩小、0 重置；缩放>1 支持拖拽移动图片
  - 跳首/末页：Home / End
  - 全屏：浏览器 F11
- 进度条：
  - 拖动时不立即加载，鼠标松开或停顿约 250ms 才加载最终页。

## 已知限制与计划

- 连续模式为初版：当前加载当前页起的若干张，后续将加入更智能的懒加载与内存控制。
- 图片缓存未设上限：后续会加 LRU 淘汰策略与大小限制。
- 悬停模式与触控板体验：将逐步优化边缘阈值与触控手势。

## 版本日志

### 1.0.0
- 新增：图片缓存与并发去重
- 新增：惰性跳转（去抖）
- 新增：缩略图悬停显示开关
- 新增：连续横向模式（原型）
- 优化：缩略图横向滚动速度
- 变更：移除底部页码与进度条彩色填充
- 优化：暗/浅色模式图标自适配

## 致谢
- 参考了 JHenTai 的交互体验进行布局与模式设计。

## 本地更新一键同步到 GitHub

在 `eh-reader-extension` 目录提供了脚本 `sync-changes.ps1`，用于把本地改动一键提交并推送到远端仓库（origin/main）。

用法（在 PowerShell 中运行，推荐在该目录内执行）：

```
./sync-changes.ps1               # 无提交信息则自动生成时间戳信息
./sync-changes.ps1 -Message "fix: 修复连续模式滚动卡顿"
```

提示：脚本会先检测是否有变更；若没有，则跳过 commit 直接 push（保持幂等）。
