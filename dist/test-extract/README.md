# EH Modern Reader

> 现代化的 E-Hentai 阅读器浏览器扩展

![Version](https://img.shields.io/badge/version-1.0.0-blue)
![License](https://img.shields.io/badge/license-MIT-green)

## 📖 简介

EH Modern Reader 是一个为 E-Hentai / ExHentai 站点设计的现代化阅读器扩展，旨在替代原版 MPV 阅读器，提供更优雅、流畅的阅读体验。

### ✨ 核心特性

- 🎨 **现代化 UI** - 简洁优雅的界面设计
- 🌙 **深色模式** - 护眼的夜间阅读模式
- ⚡ **智能预加载** - 提前加载下一页，无缝阅读
- 💾 **进度记忆** - 自动保存阅读位置
- ⌨️ **快捷键控制** - 键盘、鼠标、滚轮全支持
- 📱 **响应式设计** - 完美适配不同屏幕尺寸
- 🖼️ **灵活显示** - 多种图片适配模式
- 🎯 **无缝集成** - 自动替换原版阅读器

## 🚀 安装方法

### Chrome / Edge

1. 下载此项目到本地
2. 打开浏览器，进入扩展管理页面：
   - Chrome: `chrome://extensions/`
   - Edge: `edge://extensions/`
3. 开启右上角的 **"开发者模式"**
4. 点击 **"加载已解压的扩展程序"**
5. 选择项目文件夹 `eh-reader-extension`
6. 完成！访问 E-Hentai MPV 页面即可自动启用

### Firefox

1. 下载此项目到本地
2. 打开 `about:debugging#/runtime/this-firefox`
3. 点击 **"临时载入附加组件"**
4. 选择项目中的 `manifest.json`
5. 完成！

## 📋 功能说明

### 界面布局

```
┌─────────────────────────────────────────────┐
│  [←] 标题          页码      [设置][全屏][主题] │  ← 顶部工具栏
├──────┬──────────────────────────────────────┤
│      │                                      │
│ 缩略图 │          主图片显示区                 │  ← 主内容区
│ 列表  │        [← 图片 →]                    │
│      │                                      │
├──────┴──────────────────────────────────────┤
│  进度条: ════════●═══════════                │  ← 底部控制栏
│  [⏮] [页码输入] [⏭]                         │
└─────────────────────────────────────────────┘
```

### 快捷键

| 按键 | 功能 |
|------|------|
| `←` / `A` | 上一页 |
| `→` / `D` / `空格` | 下一页 |
| `Home` | 第一页 |
| `End` | 最后一页 |
| `F` | 切换侧边栏 |
| `F11` | 全屏 |
| `Esc` | 退出全屏/关闭面板 |

### 鼠标操作

- **点击图片左侧** - 上一页
- **点击图片右侧** - 下一页
- **点击缩略图** - 跳转到对应页
- **滚轮滚动** - 翻页

### 设置选项

- **图片适配模式**
  - 适应窗口（默认）
  - 适应宽度
  - 适应高度
  - 原始大小

- **图片对齐**
  - 居中（默认）
  - 左对齐
  - 右对齐

- **预加载下一页** - 开启后自动预加载下一页图片
- **平滑滚动** - 缩略图滚动动画效果

## 🛠️ 项目结构

```
eh-reader-extension/
├─ manifest.json          # 扩展配置文件
├─ content.js            # 内容脚本（注入页面）
├─ background.js         # 后台脚本
├─ popup.html            # 弹出窗口页面
├─ popup.js              # 弹出窗口逻辑
├─ README.md             # 说明文档
├─ style/
│  └─ reader.css         # 阅读器样式
├─ js/
│  └─ reader.js          # 阅读器核心逻辑
└─ icons/
   ├─ icon16.png         # 16x16 图标
   ├─ icon48.png         # 48x48 图标
   └─ icon128.png        # 128x128 图标
```

## 🔧 技术栈

- **纯原生开发** - HTML + CSS + JavaScript
- **浏览器扩展 API** - Manifest V3
- **现代 CSS** - Flexbox、CSS Grid、CSS Variables
- **ES6+** - 模块化、异步处理

## 📝 开发说明

### 核心实现

1. **数据提取** - 从原页面 JavaScript 中提取图片列表和配置
2. **DOM 替换** - 完全重写页面结构和样式
3. **图片加载** - 实现图片缓存和预加载机制
4. **状态管理** - 使用 localStorage 保存阅读进度和设置
5. **事件处理** - 统一的键盘、鼠标、触摸事件处理

### 与原版对比

| 特性 | 原版 MPV | EH Modern Reader |
|------|----------|------------------|
| UI 设计 | 传统布局 | 现代化设计 |
| 深色模式 | ❌ | ✅ |
| 进度记忆 | ❌ | ✅ |
| 响应式 | 部分支持 | 完全支持 |
| 预加载 | 基础 | 智能预加载 |
| 自定义设置 | 有限 | 丰富 |

## 🎯 使用场景

- ✅ 访问 `https://e-hentai.org/mpv/*` 时自动启用
- ✅ 访问 `https://exhentai.org/mpv/*` 时自动启用
- ❌ 其他页面不受影响

## 🐛 已知问题

1. **图片 URL 获取** - 当前使用缩略图 URL 作为演示，生产环境需要调用 E-Hentai API 获取完整图片
2. **登录状态** - ExHentai 需要有效的登录 Cookie
3. **跨域限制** - 某些图片服务器可能有跨域限制

## 🔮 未来计划

- [ ] 实现完整的 E-Hentai API 图片获取
- [ ] 双页显示模式
- [ ] 图片缩放功能
- [ ] 批量下载
- [ ] 自定义主题配色
- [ ] 云端同步阅读进度
- [ ] 更多自定义选项

## 📄 开源协议

MIT License

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## ⚠️ 免责声明

本扩展仅用于学习和研究目的，不得用于商业用途。使用本扩展时请遵守当地法律法规。

## 📧 联系方式

- GitHub: [您的 GitHub 用户名]
- Email: [您的邮箱]

---

**享受更好的阅读体验！📚✨**
